<section class="testimonials-section">
  <div class="testimonials-container">
    <!-- Section Title -->
    <div class="testimonials-header">
      <h2 class="testimonials-title">What our customers say about us.</h2>
    </div>

    <!-- Testimonials Carousel -->
    <div class="testimonials-carousel">
      <!-- Testimonials Grid -->
      <div class="testimonials-grid">
        @for (testimonial of visibleTestimonials; track testimonial.id) {
          <div
            [class]="
              'testimonial-card ' + (testimonial.featured ? 'featured' : '')
            "
          >
            <!-- Quote Icon -->
            <svg
              class="testimonial-quote-icon"
              viewBox="0 0 28 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M9.89174 0L11.4074 2.57576C10.5565 3.68687 9.75879 4.92424 9.01425 6.28788C8.32289 7.65152 7.92403 9.06566 7.81766 10.5303L12.2051 11.2879V20H0V13.7879C0 10.202 0.877493 7.32323 2.63248 5.15152C4.44065 2.92929 6.8604 1.21212 9.89174 0ZM25.6866 0L27.2023 2.57576C26.3514 3.68687 25.5537 4.92424 24.8091 6.28788C24.1178 7.65152 23.7189 9.06566 23.6125 10.5303L28 11.2879V20H15.7949V13.7879C15.7949 10.202 16.6724 7.32323 18.4274 5.15152C20.2355 2.92929 22.6553 1.21212 25.6866 0Z"
                fill="#E5E5E5"
              />
            </svg>

            <!-- Title -->
            <h3 class="testimonial-title">
              {{ testimonial.title }}
            </h3>

            <!-- Review Text -->
            <p class="testimonial-review">
              {{ testimonial.review }}
            </p>

            <!-- Rating -->
            <div class="testimonial-rating">
              <svg
                class="testimonial-star"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M9.15327 2.33977L10.3266 4.68643C10.4866 5.0131 10.9133 5.32643 11.2733 5.38643L13.3999 5.73977C14.7599 5.96643 15.0799 6.9531 14.0999 7.92643L12.4466 9.57977C12.1666 9.85977 12.0133 10.3998 12.0999 10.7864L12.5733 12.8331C12.9466 14.4531 12.0866 15.0798 10.6533 14.2331L8.65994 13.0531C8.29994 12.8398 7.70661 12.8398 7.33994 13.0531L5.34661 14.2331C3.91994 15.0798 3.05327 14.4464 3.42661 12.8331L3.89994 10.7864C3.98661 10.3998 3.83327 9.85977 3.55327 9.57977L1.89994 7.92643C0.926606 6.9531 1.23994 5.96643 2.59994 5.73977L4.72661 5.38643C5.07994 5.32643 5.50661 5.0131 5.66661 4.68643L6.83994 2.33977C7.47994 1.06643 8.51994 1.06643 9.15327 2.33977Z"
                  fill="#AF0A09"
                />
              </svg>
              <span class="testimonial-rating-value">{{
                testimonial.rating
              }}</span>
            </div>

            <!-- Customer Info -->
            <div class="testimonial-customer">
              <img
                [src]="testimonial.avatar"
                [alt]="testimonial.customerName"
                class="customer-avatar"
              />
              <div class="customer-details">
                <span class="customer-name">
                  {{ testimonial.customerName }}
                </span>
                <span class="customer-role">
                  {{ testimonial.customerRole }}
                </span>
              </div>
            </div>
          </div>
        }
      </div>

      <!-- Navigation Arrows (Hidden on mobile) -->
      <button
        (click)="previousSlide()"
        class="testimonials-nav-btn testimonials-nav-prev"
        aria-label="Previous testimonials"
      >
        <svg
          class="nav-arrow"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M15 18L9 12L15 6"
            stroke="white"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </button>

      <button
        (click)="nextSlide()"
        class="testimonials-nav-btn testimonials-nav-next"
        aria-label="Next testimonials"
      >
        <svg
          class="nav-arrow"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M9 6L15 12L9 18"
            stroke="white"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </button>
    </div>

    <!-- Slider Dots -->
    <div class="testimonials-dots">
      @for (slide of slides; track slide) {
        <button
          (click)="goToSlide(slide)"
          [class]="'dot ' + (currentSlide === slide ? 'active' : '')"
          [attr.aria-label]="'Go to slide ' + (slide + 1)"
        ></button>
      }
    </div>

    <!-- Mobile Navigation Buttons -->
    <div class="testimonials-mobile-nav">
      <button
        (click)="previousSlide()"
        class="mobile-nav-btn"
        aria-label="Previous testimonials"
      >
        <svg
          class="nav-arrow"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M15 18L9 12L15 6"
            stroke="white"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </button>

      <button
        (click)="nextSlide()"
        class="mobile-nav-btn"
        aria-label="Next testimonials"
      >
        <svg
          class="nav-arrow"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M9 6L15 12L9 18"
            stroke="white"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </button>
    </div>
  </div>
</section>
