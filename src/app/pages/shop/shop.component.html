<div class="shop-container">
  <!-- Toast Notification -->
  <p-toast></p-toast>

  <!-- Hero Section -->
  <section class="shop-hero">
    <div class="shop-hero-content">
      <!-- Decorative Icon -->
      <div class="shop-icon-wrapper">
        <svg
          class="shop-icon"
          viewBox="0 0 56 52"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M52.1302 0.441483C51.3334 1.374 52.0251 15.0532 53.1407 20.75C53.3543 21.8419 53.6188 23.812 53.7273 25.087C53.968 27.5896 54.5241 28.6815 55.4057 28.3356C56.2026 28.0168 56.2025 27.4845 55.3786 20.8822C54.9005 17.2098 54.2868 9.35632 54.1274 4.91076C54.0223 2.5676 53.8358 0.49234 53.6765 0.305836C53.3306 -0.145162 52.5575 -0.094293 52.1336 0.438089L52.1302 0.441483Z"
            fill="#FEC51C"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M25.5938 4.0359C25.4345 4.19527 25.2751 4.56829 25.2751 4.80905C25.2751 5.52794 26.2855 7.6846 27.2451 9.01386C27.7232 9.67849 28.6828 11.2485 29.3745 12.4997C30.0663 13.751 30.9716 15.2939 31.3988 15.9586C31.8261 16.6232 32.65 17.983 33.2604 19.0206C35.2847 22.4285 35.5492 22.8524 36.0273 23.3848C36.8784 24.3173 38.3161 23.9714 38.3161 22.8253C38.3161 22.5845 37.543 21.201 36.6377 19.7632C34.7761 16.8877 34.2946 16.1179 32.8331 13.5611C32.3008 12.6015 31.1038 10.5805 30.1985 9.03758C29.266 7.49469 28.2555 5.71103 27.9097 5.0464C27.218 3.79513 26.2584 3.36788 25.5938 4.0359Z"
            fill="#FEC51C"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M16.0657 24.6123C15.5604 25.9178 17.4762 27.7523 23.678 31.852C25.8074 33.2626 28.8422 35.4736 30.4121 36.7757C32.4364 38.4542 33.4469 39.1189 33.8707 39.0646C34.6947 38.9595 34.7761 37.9456 34.003 37.203C32.6467 35.8974 28.0928 32.3064 26.0991 31.0009C24.953 30.2277 23.0914 28.8442 21.9725 27.9117C18.0866 24.6903 17.422 24.2121 16.8082 24.2121C16.4895 24.2121 16.1436 24.3987 16.0623 24.6123H16.0657Z"
            fill="#FEC51C"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M39.9131 28.0711C39.435 28.6577 42.1239 33.2627 42.975 33.2627C43.7719 33.2627 44.2805 32.6251 44.0669 31.8791C43.9855 31.5332 43.3208 30.4685 42.5749 29.458C41.1914 27.6472 40.5506 27.3013 39.9131 28.0745V28.0711Z"
            fill="#FEC51C"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M0.576467 42.4454C-0.196636 43.0049 -0.196609 44.0425 0.603619 44.5478C0.922355 44.7885 2.282 45.2124 3.58406 45.5074C4.91326 45.7991 6.72397 46.2263 7.60219 46.4671C9.38575 46.8943 9.9961 46.7858 10.2368 46.0161C10.637 44.7377 9.49088 44.1002 4.64882 42.9811C3.18399 42.6353 1.80054 42.2894 1.58692 42.208C1.3733 42.1029 0.922328 42.2351 0.576467 42.4488V42.4454Z"
            fill="#FEC51C"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M14.3635 46.5722C13.9905 47.264 14.3906 48.0371 15.4553 48.5695C15.8825 48.8102 18.6766 49.5291 21.63 50.1937C24.5834 50.8312 27.6995 51.5501 28.5506 51.7638C30.2528 52.1639 30.7343 52.0825 31.1581 51.3128C31.3989 50.8855 31.3446 50.6753 30.9716 50.3023C30.4664 49.8242 27.218 48.9459 22.6133 48.0405C21.3621 47.776 19.3141 47.2436 18.0629 46.8164C15.3197 45.911 14.7365 45.8567 14.3635 46.5756V46.5722Z"
            fill="#FEC51C"
          />
        </svg>
      </div>

      <!-- Label -->
      <p class="shop-label">Shop</p>

      <!-- Main Heading -->
      <h1 class="shop-heading">Shop Fresh, Spicy & Full of Flavor</h1>

      <!-- Description -->
      <p class="shop-description">
        Explore our wide range of handmade pickles, crafted with authentic
        recipes and natural ingredients to bring you the perfect blend of taste
        and tradition.
      </p>
    </div>
  </section>

  <!-- Filter Bar -->
  <section class="shop-filter-bar">
    <div class="filter-bar-content">
      <!-- Left: Category and Search -->
      <div class="filter-left">
        <h2 class="filter-title">Pickles</h2>
        <input
          pInputText
          type="text"
          [(ngModel)]="searchQuery"
          placeholder="Search here."
          class="search-input"
        />
      </div>

      <!-- Right: Filter Tags and Button -->
      <div class="filter-right">
        <!-- Active Filters -->
        <div class="active-filters">
          @for (filter of activeFilters; track filter) {
            <div class="filter-tag">
              <span class="filter-tag-text">{{ filter }}</span>
              <button
                (click)="removeFilter(filter)"
                aria-label="Remove filter"
                class="filter-remove-btn"
              >
                <svg
                  class="filter-remove-icon"
                  viewBox="0 0 20 20"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M14.9613 15.736C15.3133 16.0879 15.884 16.0879 16.236 15.736C16.588 15.384 16.588 14.8133 16.236 14.4613L11.7747 9.99999L16.236 5.53871C16.588 5.18672 16.588 4.61603 16.236 4.26404C15.884 3.91206 15.3133 3.91206 14.9613 4.26404L10.5 8.72533L6.03867 4.26399C5.68668 3.912 5.11599 3.912 4.764 4.26399C4.41201 4.61598 4.41201 5.18667 4.764 5.53865L9.22536 9.99999L4.76399 14.4613C4.412 14.8133 4.412 15.384 4.76399 15.736C5.11598 16.088 5.68667 16.088 6.03866 15.736L10.5 11.2747L14.9613 15.736Z"
                    fill="#C4C4C4"
                  />
                </svg>
              </button>
            </div>
          }
        </div>

        <!-- Filter Button -->
        <button
          pButton
          type="button"
          (click)="openFilters()"
          class="filter-button"
        >
          <svg
            class="filter-button-icon"
            viewBox="0 0 20 20"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M2.5 5H8.33333"
              stroke="white"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M2.5 10H10"
              stroke="white"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M15.8335 10H17.5002"
              stroke="white"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M11.6665 5L17.4998 5"
              stroke="white"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M10.8335 15L16.6668 15"
              stroke="white"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M2.5 15H5"
              stroke="white"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <circle
              cx="6.66667"
              cy="15"
              r="1.66667"
              stroke="white"
              stroke-width="1.2"
            />
            <ellipse
              cx="14.1667"
              cy="10"
              rx="1.66667"
              ry="1.66667"
              stroke="white"
              stroke-width="1.2"
            />
            <ellipse
              cx="10.0002"
              cy="5.00001"
              rx="1.66667"
              ry="1.66667"
              stroke="white"
              stroke-width="1.2"
            />
          </svg>
          <span class="filter-button-text">Filters</span>
        </button>
      </div>
    </div>
  </section>

  <!-- Product Grid -->
  <section class="shop-products-section">
    <div class="shop-products-grid">
      @for (product of paginatedProducts; track product.id) {
        <div class="shop-product-card">
          <!-- Product Image -->
          <div class="shop-product-image-wrapper">
            <img
              [src]="product.image"
              [alt]="product.name"
              class="shop-product-image"
            />
            <!-- Veg/Non-Veg Indicator -->
            <div
              class="shop-veg-indicator"
              [class.veg]="product.isVeg"
              [class.non-veg]="!product.isVeg"
            >
              <div class="shop-veg-dot"></div>
            </div>
          </div>

          <!-- Product Info -->
          <h3 class="shop-product-name">{{ product.name }}</h3>
          <p class="shop-product-price">{{ product.price }}</p>

          <!-- Add to Cart Button -->
          <button
            pButton
            type="button"
            label="Add to Cart"
            (click)="addToCart(product)"
            class="shop-add-to-cart-btn"
          ></button>
        </div>
      }
    </div>
  </section>

  <!-- Pagination -->
  <section class="shop-pagination">
    <div class="pagination-controls">
      <!-- Previous Button -->
      <button
        pButton
        type="button"
        icon="pi pi-chevron-left"
        (click)="previousPage()"
        [disabled]="currentPage === 1"
        class="pagination-btn"
      ></button>

      <!-- Page Numbers -->
      @for (page of [1, 2, 3, 4, 5]; track page) {
        <button
          pButton
          type="button"
          [label]="page.toString()"
          (click)="goToPage(page)"
          [class.active]="currentPage === page"
          class="pagination-number"
        ></button>
      }

      <!-- Next Button -->
      <button
        pButton
        type="button"
        icon="pi pi-chevron-right"
        (click)="nextPage()"
        [disabled]="currentPage === totalPages"
        class="pagination-btn"
      ></button>
    </div>
  </section>

  <!-- Filters Popup -->
  <app-filters-popup></app-filters-popup>
</div>
